# Chapter 03 Service Mocking

## Starting a Node Project

In the root of your project create a package.json file:

`$ npm init`

	name: my-node-project
	version: 1.0.0
	description: A sample Node.js project
	entry point: index.js
	author: John Doe
	license: MIT

## File Server

To serve files from a folder, install the `serve` package:

`$ npm install serve`

Create a new folder called `static` in your project directory.

`$ mkdir static`

Now create index.html and app.js files. Go to the `static` folder and run:

`$ npx serve -p 5050 static`

Open the browser at http://localhost:5050

update the package.json

```
"scripts": {
    "static": "serve -p 5050 static",
}
```

Use the npm run the app:

`$ npm run static`

Open the browser at http://localhost:5050

## Add Mock Web Service

Add the `server.mjs` at the root of the project.
Open a new terminal and run the webservice:

`$ node server.mjs`

Open the browser at http://localhost:3000/


## Get routes

remove the server.mjs file we created earlier:

`$ rm server.mjs`

create the mock service using the Fastify framework.
create new folder `mock-srv`:

```
$ mkdir mock-srv
$ cd mock-srv
```

install the Fastify framework and its command-line interface using the following command:

`$ npm add fastify fastify-cli`

generate a Fastify project scaffold by running the following command within the mock-srv folder:

`$ npx fastify generate . --esm`

source:

https://github.com/fastify/fastify-cli#generate


install dependencies:

`$ npm install`

then launch the Fastify server

`$ npm start`

if you get an error

	Error [ERR_MODULE_NOT_FOUND]: Cannot find package '@fastify/autoload'

in the `mock-srv/app.js` file:

```
	// instead of:
	// import AutoLoad from '@fastify/autoload'
	// use:
	import {fastifyAutoload as AutoLoad} from './node_modules/@fastify/autoload/index.js'
```

Open the browser at http://localhost:3000/
